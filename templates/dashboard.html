<!DOCTYPE html><html lang="uz"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>AI Sug'orish Tizimi - Professional Dashboard</title>    <style>        * {            margin: 0;            padding: 0;            box-sizing: border-box;        }        body {            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;            background: linear-gradient(135deg, #1e3c72, #2a5298);            min-height: 100vh;            color: #fff;        }        /* Navbar */        .navbar {            background: rgba(0, 0, 0, 0.3);            backdrop-filter: blur(15px);            padding: 1rem 0;            position: sticky;            top: 0;            z-index: 1000;            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);        }        .nav-container {            max-width: 1400px;            margin: 0 auto;            padding: 0 20px;            display: flex;            justify-content: space-between;            align-items: center;        }        .logo {            font-size: 1.8rem;            font-weight: bold;            background: linear-gradient(45deg, #00ff87, #60efff);            -webkit-background-clip: text;            -webkit-text-fill-color: transparent;            display: flex;            align-items: center;            gap: 10px;        }        .nav-links {            display: flex;            list-style: none;            gap: 0;        }        .nav-links li {            position: relative;        }        .nav-links a {            display: block;            color: #fff;            text-decoration: none;            padding: 12px 20px;            border-radius: 8px;            transition: all 0.3s ease;            position: relative;            font-weight: 500;        }        .nav-links a:hover,        .nav-links a.active {            background: linear-gradient(45deg, #00ff87, #60efff);            transform: translateY(-2px);            box-shadow: 0 5px 15px rgba(0, 255, 135, 0.3);        }        .nav-toggle {            display: none;            background: none;            border: none;            color: #fff;            font-size: 1.5rem;            cursor: pointer;        }        /* Main Container */        .container {            max-width: 1400px;            margin: 0 auto;            padding: 30px 20px;        }        /* Page Sections */        .page {            display: none;            animation: fadeIn 0.5s ease;        }        .page.active {            display: block;        }        @keyframes fadeIn {            from { opacity: 0; transform: translateY(20px); }            to { opacity: 1; transform: translateY(0); }        }        /* Common Styles */        .panel {            background: rgba(255, 255, 255, 0.1);            backdrop-filter: blur(10px);            border-radius: 20px;            padding: 25px;            margin-bottom: 25px;            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);            border: 1px solid rgba(255, 255, 255, 0.1);        }        .panel h2 {            font-size: 1.8rem;            margin-bottom: 20px;            display: flex;            align-items: center;            gap: 10px;            color: #00ff87;        }        /* Grid Layouts */        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }        /* Dashboard Specific */        .status-bar {            display: grid;            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));            gap: 20px;            margin-bottom: 30px;        }        .status-card {            background: rgba(255, 255, 255, 0.15);            backdrop-filter: blur(10px);            border-radius: 15px;            padding: 20px;            text-align: center;            position: relative;            overflow: hidden;            transition: transform 0.3s ease;            border: 1px solid rgba(255, 255, 255, 0.1);        }        .status-card:hover {            transform: translateY(-5255,255,0.1);        }        .status-card:hover {            transform: translateY(-5px);        }        .status-card::before {            content: '';            position: absolute;            top: 0;            left: 0;            right: 0;            height: 4px;            background: linear-gradient(90deg, #00ff87, #60efff);        }        .status-card.warning::before {            background: linear-gradient(90deg, #ff9a00, #ffcd00);        }        .status-card.danger::before {            background: linear-gradient(90deg, #ff416c, #ff4b2b);        }        .status-icon {            font-size: 3rem;            margin-bottom: 10px;            display: block;        }        .status-value {            font-size: 2rem;            font-weight: bold;            margin-bottom: 5px;        }        .status-label {            opacity: 0.8;            font-size: 1rem;        }        /* Charts and Stats */        .chart-container {            background: rgba(0, 0, 0, 0.2);            border-radius: 10px;            padding: 20px;            height: 300px;            display: flex;            align-items: center;            justify-content: center;            position: relative;            overflow: hidden;        }        .chart-placeholder {            color: #60efff;            text-align: center;            font-size: 1.1rem;        }        /* Animated Chart Bars */        .chart-bars {            display: flex;            align-items: end;            gap: 10px;            height: 200px;            justify-content: center;        }        .chart-bar {            background: linear-gradient(to top, #00ff87, #60efff);            border-radius: 5px 5px 0 0;            min-width: 30px;            animation: growUp 2s ease;            position: relative;        }        .chart-bar:nth-child(1) { height: 60%; animation-delay: 0.1s; }        .chart-bar:nth-child(2) { height: 80%; animation-delay: 0.2s; }        .chart-bar:nth-child(3) { height: 45%; animation-delay: 0.3s; }        .chart-bar:nth-child(4) { height: 90%; animation-delay: 0.4s; }        .chart-bar:nth-child(5) { height: 70%; animation-delay: 0.5s; }        .chart-bar:nth-child(6) { height: 55%; animation-delay: 0.6s; }        .chart-bar:nth-child(7) { height: 85%; animation-delay: 0.7s; }        @keyframes growUp {            from { height: 0; }        }        /* Data Table */        .data-table {            width: 100%;            border-collapse: collapse;            background: rgba(255, 255, 255, 0.05);            border-radius: 10px;            overflow: hidden;        }        .data-table th {            background: rgba(0, 255, 135, 0.2);            padding: 15px;            text-align: left;            font-weight: 600;            color: #00ff87;        }        .data-table td {            padding: 12px 15px;            border-bottom: 1px solid rgba(255, 255, 255, 0.1);        }        .data-table tr:hover {            background: rgba(255, 255, 255, 0.05);        }        /* Progress Bars */        .progress-container {            margin: 15px 0;        }        .progress-label {            display: flex;            justify-content: space-between;            margin-bottom: 5px;            font-size: 0.9rem;        }        .progress-bar {            background: rgba(255, 255, 255, 0.2);            border-radius: 10px;            height: 8px;            overflow: hidden;        }        .progress-fill {            height: 100%;            background: linear-gradient(90deg, #00ff87, #60efff);            border-radius: 10px;            transition: width 0.5s ease;            position: relative;        }        .progress-fill::after {            content: '';            position: absolute;            top: 0;            left: 0;            right: 0;            bottom: 0;            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);            animation: shimmer 2s infinite;        }        @keyframes shimmer {            0% { transform: translateX(-100%); }            100% { transform: translateX(100%); }        }        .progress-fill.warning {            background: linear-gradient(90deg, #ff9a00, #ffcd00);        }        .progress-fill.critical {            background: linear-gradient(90deg, #ff416c, #ff4b2b);        }        /* AI Brain Animation */        .ai-brain {            width: 80px;            height: 80px;            background: linear-gradient(45deg, #00ff87, #60efff);            border-radius: 50%;            display: flex;            align-items: center;            justify-content: center;            font-size: 2rem;            animation: pulse 2s infinite;            margin: 0 auto 20px;        }        @keyframes pulse {            0% { transform: scale(1); opacity: 1; }            50% { transform: scale(1.1); opacity: 0.7; }            100% { transform: scale(1); opacity: 1; }        }        /* Controls */        .controls {            display: grid;            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));            gap: 15px;            margin-top: 20px;        }        .control-btn {            background: linear-gradient(45deg, #667eea, #764ba2);            border: none;            color: white;            padding: 15px 20px;            border-radius: 10px;            font-size: 1rem;            font-weight: bold;            cursor: pointer;            transition: all 0.3s ease;            position: relative;            overflow: hidden;        }        .control-btn:hover {            transform: translateY(-2px);            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);        }        .control-btn.active {            background: linear-gradient(45deg, #00ff87, #60efff);            animation: glow 2s infinite;        }        @keyframes glow {            0%, 100% { box-shadow: 0 0 20px rgba(0, 255, 135, 0.3); }            50% { box-shadow: 0 0 30px rgba(0, 255, 135, 0.6); }        }        .control-btn.stop {            background: linear-gradient(45deg, #ff416c, #ff4b2b);        }        /* Weather Cards */        .weather-grid {            display: grid;            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));            gap: 20px;        }        .weather-card {            background: rgba(255, 255, 255, 0.1);            border-radius: 15px;            padding: 20px;            text-align: center;            transition: transform 0.3s ease;            border: 1px solid rgba(255, 255, 255, 0.1);        }        .weather-card:hover {            transform: translateY(-5px);        }        .weather-icon {            font-size: 3rem;            margin-bottom: 10px;        }        .weather-value {            font-size: 2rem;            font-weight: bold;            color: #60efff;            margin-bottom: 5px;        }        .weather-label {            opacity: 0.8;        }        /* Sensor Grid */        .sensor-grid {            display: grid;            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));            gap: 20px;        }        .sensor-card {            background: rgba(255, 255, 255, 0.1);            border-radius: 15px;            padding: 20px;            border-left: 4px solid #00ff87;            transition: all 0.3s ease;        }        .sensor-card:hover {            transform: translateX(5px);            background: rgba(255, 255, 255, 0.15);        }        .sensor-card.warning {            border-left-color: #ff9a00;        }        .sensor-card.critical {            border-left-color: #ff416c;            animation: alertPulse 2s infinite;        }        @keyframes alertPulse {            0%, 100% { box-shadow: 0 0 10px rgba(255, 65, 108, 0.3); }            50% { box-shadow: 0 0 20px rgba(255, 65, 108, 0.6); }        }        .sensor-name {            font-size: 1.1rem;            font-weight: 600;            margin-bottom: 10px;        }        .sensor-value {            font-size: 2rem;            font-weight: bold;            color: #00ff87;            margin-bottom: 5px;        }        .sensor-status {            font-size: 0.9rem;            opacity: 0.8;        }        /* Live Data Feed */        .data-feed {            background: rgba(0, 0, 0, 0.3);            border-radius: 10px;            padding: 20px;            max-height: 400px;            overflow-y: auto;            font-family: 'Courier New', monospace;            font-size: 0.9rem;        }        .data-entry {            padding: 8px 0;            border-bottom: 1px solid rgba(255, 255, 255, 0.1);            opacity: 0;            animation: fadeInUp 0.5s ease forwards;        }        .data-entry:last-child {            border-bottom: none;        }        .timestamp {            color: #60efff;            margin-right: 10px;        }        .data-normal { color: #00ff87; }        .data-warning { color: #ff9a00; }        .data-critical { color: #ff416c; }        /* Responsive Design */        @media (max-width: 768px) {            .nav-toggle {                display: block;            }            .nav-links {                display: none;                position: absolute;                top: 100%;                left: 0;                right: 0;                background: rgba(0, 0, 0, 0.95);                backdrop-filter: blur(15px);                flex-direction: column;                padding: 20px;                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);            }            .nav-links.active {                display: flex;            }            .grid-2, .grid-3, .grid-4 {                grid-template-columns: 1fr;            }            .status-bar {                grid-template-columns: repeat(2, 1fr);            }            .weather-grid, .sensor-grid {                grid-template-columns: 1fr;            }        }        /* Custom Scrollbar */        ::-webkit-scrollbar {            width: 8px;        }        ::-webkit-scrollbar-track {            background: rgba(255, 255, 255, 0.1);            border-radius: 4px;        }        ::-webkit-scrollbar-thumb {            background: linear-gradient(45deg, #00ff87, #60efff);            border-radius: 4px;        }        ::-webkit-scrollbar-thumb:hover {            background: linear-gradient(45deg, #60efff, #00ff87);        }        /* Background Animation */        body::before {            content: '';            position: fixed;            top: 0;            left: 0;            width: 100%;            height: 100%;            background-image:                radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,0.3), transparent),                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.2), transparent),                radial-gradient(1px 1px at 90px 40px, rgba(255,255,255,0.3), transparent);            background-repeat: repeat;            background-size: 200px 150px;            animation: particle-animation 20s linear infinite;            pointer-events: none;            z-index: -1;        }        @keyframes particle-animation {            0% { transform: translate(0, 0); }            100% { transform: translate(-200px, -150px); }        }    </style></head><body>    <!-- Navigation Bar -->    <nav class="navbar">        <div class="nav-container">            <div class="logo">                <span>🤖</span>                AI Sug'orish Tizimi            </div>            <ul class="nav-links" id="navLinks">                <li><a href="#" class="nav-link active" data-page="dashboard">🏠 Dashboard</a></li>                <li><a href="#" class="nav-link" data-page="weather">🌤️ Ob-havo</a></li>                <li><a href="#" class="nav-link" data-page="sensors">📡 Datchilar</a></li>                <li><a href="#" class="nav-link" data-page="ai">🧠 AI Tahlil</a></li>                <li><a href="#" class="nav-link" data-page="statistics">📊 Statistika</a></li>                <li><a href="#" class="nav-link" data-page="control">⚙️ Boshqaruv</a></li>            </ul>            <button class="nav-toggle" id="navToggle">☰</button>        </div>    </nav>    <div class="container">        <!-- Dashboard Page -->        <div id="dashboard" class="page active">            <!-- Status Bar -->            <div class="status-bar" id="statusBar">                <div class="status-card">                    <span class="status-icon">🌱</span>                    <div class="status-value" id="systemStatus">YUKLANMOQDA</div>                    <div class="status-label">Tizim Holati</div>                </div>                <div class="status-card warning">                    <span class="status-icon">💧</span>                    <div class="status-value" id="waterLevel">--</div>                    <div class="status-label">Suv Darajasi</div>                </div>                <div class="status-card">                    <span class="status-icon">🧠</span>                    <div class="status-value" id="aiStatus">TAHLIL</div>                    <div class="status-label">AI Holati</div>                </div>                <div class="status-card" id="irrigationCard">                    <span class="status-icon">⚡</span>                    <div class="status-value" id="irrigationStatus">--</div>                    <div class="status-label">Hozirgi Harakat</div>                </div>            </div>            <!-- Main Dashboard Grid -->            <div class="grid-2">                <!-- Soil Analysis Panel -->                <div class="panel">                    <h2>🌍 Tuproq Tahlili</h2>                    <div id="soilAnalysis">                        <div class="progress-container">                            <div class="progress-label">                                <span>Tuproq namligi</span>                                <span id="soilMoisture">--</span>                            </div>                            <div class="progress-bar">                                <div class="progress-fill" id="soilMoistureFill" style="width: 0%"></div>                            </div>                        </div>                        <div class="progress-container">                            <div class="progress-label">                                <span>pH darajasi</span>                                <span id="phLevel">--</span>                            </div>                            <div class="progress-bar">                                <div class="progress-fill" id="phLevelFill" style="width: 0%"></div>                            </div>                        </div>                        <div class="progress-container">                            <div class="progress-label">                                <span>Tuproq harorati</span>                                <span id="soilTemp">--</span>                            </div>                            <div class="progress-bar">                                <div class="progress-fill" id="soilTempFill" style="width: 0%"></div>                            </div>                        </div>                    </div>                </div>                <!-- Quick Weather -->                <div class="panel">                    <h2>🌤️ Ob-havo (Qisqa)</h2>                    <div class="grid-3" id="quickWeather">                        <div style="text-align: center;">                            <div style="font-size: 2rem;">🌡️</div>                            <div style="font-size: 1.5rem; color: #60efff; margin: 10px 0;" id="currentTemp">--°C</div>                            <div>Harorat</div>                        </div>                        <div style="text-align: center;">                            <div style="font-size: 2rem;">💨</div>                            <div style="font-size: 1.5rem; color: #60efff; margin: 10px 0;" id="currentHumidity">--%</div>                            <div>Namlik</div>                        </div>                        <div style="text-align: center;">                            <div style="font-size: 2rem;">🌧️</div>                            <div style="font-size: 1.5rem; color: #ff9a00; margin: 10px 0;" id="currentRain">--mm</div>                            <div>Yomg'ir</div>                        </div>                    </div>                </div>            </div>            <!-- Live Data Feed -->            <div class="panel">                <h2>📡 Jonli Ma'lumotlar</h2>                <div class="data-feed" id="dataFeed">                    <div class="data-entry data-normal">                        <span class="timestamp">[--:--:--]</span>                        Tizim ishga tushmoqda...                    </div>                </div>            </div>        </div>        <!-- Weather Analysis Page -->        <div id="weather" class="page">            <div class="panel">                <h2>🌤️ Ob-havo Tahlili va Bashorati</h2>            </div>            <!-- Current Weather -->            <div class="weather-grid" id="weatherGrid">                <!-- Weather cards will be populated by JavaScript -->            </div>            <!-- 7-Day Forecast Chart -->            <div class="panel">                <h2>📈 7 Kunlik Prognoz</h2>                <div class="chart-container" id="forecastChart">                    <div class="chart-placeholder">Prognoz yuklanmoqda...</div>                </div>            </div>            <!-- Weather Impact Analysis -->            <div class="panel" id="weatherImpact">                <h2>🎯 Ob-havoning Ta'siri</h2>                <div id="weatherAnalysis">                    <div class="chart-placeholder">Tahlil yuklanmoqda...</div>                </div>            </div>        </div>        <!-- Sensors Data Page -->        <div id="sensors" class="page">            <div class="panel">                <h2>📡 Datchilar Ma'lumotlari</h2>                <p style="opacity: 0.8;">Real vaqtda barcha datchilardan keladigan ma'lumotlar</p>            </div>            <!-- Active Sensors Grid -->            <div class="sensor-grid" id="sensorGrid">                <!-- Sensor cards will be populated by JavaScript -->            </div>            <!-- Sensors Data Table -->            <div class="panel">                <h2>📊 Datchilar Statistikasi (Oxirgi 24 soat)</h2>                <table class="data-table" id="sensorTable">                    <thead>                        <tr>                            <th>Datchik</th>                            <th>Hozirgi Qiymat</th>                            <th>Min (24s)</th>                            <th>Max (24s)</th>                            <th>O'rtacha</th>                            <th>Holati</th>                        </tr>                    </thead>                    <tbody id="sensorTableBody">                        <!-- Table rows will be populated by JavaScript -->                    </tbody>                </table>            </div>        </div>        <!-- AI Analysis Page -->        <div id="ai" class="page">            <div class="panel">                <h2>🧠 AI Tahlil va Qarorlar</h2>                <div class="ai-brain">🤖</div>                <div style="text-align: center; margin-bottom: 30px;">                    <h3 style="color: #00ff87; margin-bottom: 10px;">AI Tizimi - Real vaqtda tahlil</h3>                    <p style="opacity: 0.8;">Barcha datchilar ma'lumotlarini tahlil qilib, optimal qarorlar qabul qilyapti</p>                </div>            </div>            <!-- AI Decision Making -->            <div class="grid-2">                <div class="panel">                    <h2>⚡ Joriy AI Qarori</h2>                    <div id="aiDecision">                        <div class="chart-placeholder">AI tahlil yuklanmoqda...</div>                    </div>                </div>                <div class="panel">                    <h2>📈 AI O'rganish Jarayoni</h2>                    <div id="aiLearning">                        <div class="chart-placeholder">O'rganish ma'lumotlari yuklanmoqda...</div>                    </div>                </div>            </div>            <!-- AI Recommendations Timeline -->            <div class="panel">                <h2>⏰ AI Tavsiyalar Vaqt Jadvali</h2>                <div id="aiTimeline">                    <div class="chart-placeholder">Tavsiyalar yuklanmoqda...</div>                </div>            </div>        </div>        <!-- Statistics Page -->        <div id="statistics" class="page">            <div class="panel">                <h2>📊 Tizim Statistikalari</h2>                <p style="opacity: 0.8;">Umumiy ishlash ko'rsatkichlari va tahlillar</p>            </div>            <!-- Key Metrics -->            <div class="grid-4" id="statisticsMetrics">                <!-- Metrics will be populated by JavaScript -->            </div>            <!-- Charts Row -->            <div class="grid-2">                <div class="panel">                    <h2>📈 Tuproq Namligi Trendi (7 kun)</h2>                    <div class="chart-container" id="moistureTrend">                        <div class="chart-placeholder">Trend ma'lumotlari yuklanmoqda...</div>                    </div>                </div>                <div class="panel">                    <h2>🌡️ Harorat Dinamikasi</h2>                    <div class="chart-container" id="temperatureDynamics">                        <div class="chart-placeholder">Harorat ma'lumotlari yuklanmoqda...</div>                    </div>                </div>            </div>        </div>        <!-- Control Panel Page -->        <div id="control" class="page">            <div class="panel">                <h2>⚙️ Tizim Boshqaruvi</h2>                <p style="opacity: 0.8;">Manual va avtomatik rejimlar, tizim sozlamalari</p>            </div>            <!-- System Control Cards -->            <div class="grid-2">                <div class="panel">                    <h2>🎮 Asosiy Boshqaruv</h2>                    <div style="margin-bottom: 25px;">                        <h3 style="color: #00ff87; margin-bottom: 15px;">Tizim Rejimi</h3>                        <div class="controls">                            <button class="control-btn active" id="autoModeBtn">🤖 Avtomatik Rejim</button>                            <button class="control-btn" id="manualModeBtn">👤 Qo'lda Boshqarish</button>                        </div>                    </div>                    <div style="margin-bottom: 25px;">                        <h3 style="color: #60efff; margin-bottom: 15px;">Sug'orish Boshqaruvi</h3>                        <div class="controls">                            <button class="control-btn" id="startIrrigationBtn" style="background: linear-gradient(45deg, #00ff87, #60efff);">▶️ Sug'orishni Boshlash</button>                            <button class="control-btn stop" id="stopIrrigationBtn">⏹️ To'xtatish</button>                        </div>                    </div>                    <div>                        <h3 style="color: #ff9a00; margin-bottom: 15px;">Tez Harakatlar</h3>                        <div class="controls">                            <button class="control-btn" id="restartSystemBtn">🔄 Tizimni Qayta Ishga Tushirish</button>                            <button class="control-btn" id="generateReportBtn">📊 Hisobot Yaratish</button>                            <button class="control-btn" id="testModeBtn">🧪 Test Rejimi</button>                            <button class="control-btn" id="calibrateBtn">🔧 Kalibrlash</button>                        </div>                    </div>                </div>                <div class="panel">                    <h2>⏱️ Vaqt Sozlamalari</h2>                    <div id="timeSettings">                        <div class="chart-placeholder">Vaqt sozlamalari yuklanmoqda...</div>                    </div>                </div>            </div>            <!-- System Status -->            <div class="panel">                <h2>🔧 Tizim Holati va Diagnostika</h2>                <div class="grid-2" id="systemDiagnostics">                    <!-- System diagnostics will be populated by JavaScript -->                </div>            </div>        </div>    </div>    <script>        // API Base URL        const API_BASE_URL = '/api';                // Global variables        let currentData = {};        let updateInterval;                // Navigation functionality        document.addEventListener('DOMContentLoaded', function() {            const navLinks = document.querySelectorAll('.nav-link');            const pages = document.querySelectorAll('.page');            const navToggle = document.getElementById('navToggle');            const navLinksContainer = document.getElementById('navLinks');            // Handle navigation            navLinks.forEach(link => {                link.addEventListener('click', function(e) {                    e.preventDefault();                    // Remove active class from all links and pages                    navLinks.forEach(l => l.classList.remove('active'));                    pages.forEach(p => p.classList.remove('active'));                    // Add active class to clicked link                    this.classList.add('active');                    // Show corresponding page                    const targetPage = this.getAttribute('data-page');                    document.getElementById(targetPage).classList.add('active');                    // Close mobile menu                    navLinksContainer.classList.remove('active');                                        // Load page-specific data                    loadPageData(targetPage);                });            });            // Mobile menu toggle            navToggle.addEventListener('click', function() {                navLinksContainer.classList.toggle('active');            });            // Initialize dashboard            initializeDashboard();                        // Set up auto-refresh            updateInterval = setInterval(updateDashboardData, 30000); // Update every 30 seconds        });        // Initialize dashboard        async function initializeDashboard() {            try {                await updateDashboardData();                await generateTestData(); // Generate initial test data            } catch (error) {                console.error('Error initializing dashboard:', error);                showError('Tizimni ishga tushirishda xatolik yuz berdi');            }        }        // Update dashboard data        async function updateDashboardData() {            try {                const response = await fetch(`${API_BASE_URL}/dashboard-data/`);                if (!response.ok) throw new Error('Network response was not ok');                                const data = await response.json();                currentData = data;                                updateStatusBar(data);                updateSoilAnalysis(data);                updateQuickWeather(data);                updateDataFeed(data);                            } catch (error) {                console.error('Error updating dashboard data:', error);                showError('Ma\'lumotlarni yangilashda xatolik');            }        }        // Generate test data        async function generateTestData() {            try {                const response = await fetch(`${API_BASE_URL}/sensor/sensors/generate_test_data/`, {                    method: 'POST',                    headers: {                        'Content-Type': 'application/json',                    }                });                                if (response.ok) {                    console.log('Test data generated successfully');                }            } catch (error) {                console.error('Error generating test data:', error);            }        }        // Update status bar        function updateStatusBar(data) {            const systemStatus = document.getElementById('systemStatus');            const waterLevel = document.getElementById('waterLevel');            const aiStatus = document.getElementById('aiStatus');            const irrigationStatus = document.getElementById('irrigationStatus');            const irrigationCard = document.getElementById('irrigationCard');            if (data.system_status) {                const status = data.system_status;                                // System status                systemStatus.textContent = status.system_mode === 'automatic' ? 'FAOL' : 'MANUAL';                                // Water level                waterLevel.textContent = status.water_tank_level ? `${Math.round(status.water_tank_level)}%` : 'N/A';                                // AI status                aiStatus.textContent = 'TAHLIL';                                // Irrigation status                if (status.active_zones_count > 0) {                    irrigationStatus.textContent = 'SUG\'ORISH';                    irrigationCard.classList.add('danger');                } else {                    irrigationStatus.textContent = 'KUTISH';                    irrigationCard.classList.remove('danger');                }            }        }        // Update soil analysis        function updateSoilAnalysis(data) {            if (data.dashboard && data.dashboard.sensor_readings) {                const sensors = data.dashboard.sensor_readings;                                // Find soil moisture sensor                const soilMoistureSensor = sensors.find(s => s.sensor_type === 'soil_moisture');                if (soilMoistureSensor) {                    const value = soilMoistureSensor.value;                    document.getElementById('soilMoisture').textContent = `${value}%`;                    const fill = document.getElementById('soilMoistureFill');                    fill.style.width = `${value}%`;                                        // Set color based on value                    if (value < 25) {                        fill.className = 'progress-fill critical';                    } else if (value < 40) {                        fill.className = 'progress-fill warning';                    } else {                        fill.className = 'progress-fill';                    }                }                                // Find pH sensor                const phSensor = sensors.find(s => s.sensor_type === 'ph_level');                if (phSensor) {                    const value = phSensor.value;                    document.getElementById('phLevel').textContent = value.toFixed(1);                    const fill = document.getElementById('phLevelFill');                    const percentage = ((value - 6.0) / (8.0 - 6.0)) * 100;                    fill.style.width = `${Math.max(0, Math.min(100, percentage))}%`;                }                                // Find soil temperature sensor                const soilTempSensor = sensors.find(s => s.sensor_type === 'soil_temperature');                if (soilTempSensor) {                    const value = soilTempSensor.value;                    document.getElementById('soilTemp').textContent = `${value}°C`;                    const fill = document.getElementById('soilTempFill');                    const percentage = ((value - 10) / (30 - 10)) * 100;                    fill.style.width = `${Math.max(0, Math.min(100, percentage))}%`;                                        if (value < 15 || value > 25) {                        fill.className = 'progress-fill warning';                    } else {                        fill.className = 'progress-fill';                    }                }            }        }        // Update quick weather        function updateQuickWeather(data) {            if (data.dashboard && data.dashboard.current_weather) {                const weather = data.dashboard.current_weather;                                document.getElementById('currentTemp').textContent = `${Math.round(weather.temperature)}°C`;                document.getElementById('currentHumidity').textContent = `${Math.round(weather.humidity)}%`;                document.getElementById('currentRain').textContent = `${weather.rainfall || 0}mm`;            }        }        // Update data feed        function updateDataFeed(data) {            const dataFeed = document.getElementById('dataFeed');            const now = new Date();            const timeStr = now.getHours().toString().padStart(2, '0') + ':' +                           now.getMinutes().toString().padStart(2, '0') + ':' +                           now.getSeconds().toString().padStart(2, '0');            // Create new entry            const newEntry = document.createElement('div');            newEntry.className = 'data-entry data-normal';            newEntry.innerHTML = `<span class="timestamp">[${timeStr}]</span> Ma'lumotlar muvaffaqiyatli yangilandi`;            // Add to feed            dataFeed.insertBefore(newEntry, dataFeed.firstChild);            // Remove old entries (keep only latest 10)            const entries = dataFeed.querySelectorAll('.data-entry');            if (entries.length > 10) {                dataFeed.removeChild(entries[entries.length - 1]);            }            // Animate new entry            setTimeout(() => {                newEntry.style.opacity = '1';            }, 100);        }        // Load page-specific data        async function loadPageData(page) {            switch (page) {                case 'weather':                    await loadWeatherData();                    break;                case 'sensors':                    await loadSensorData();                    break;                case 'ai':                    await loadAIData();                    break;                case 'statistics':                    await loadStatisticsData();                    break;                case 'control':                    await loadControlData();                    break;            }        }        // Load weather data        async function loadWeatherData() {            try {                // Load current weather                const weatherResponse = await fetch(`${API_BASE_URL}/sensor/weather/current/`);                const weatherData = await weatherResponse.json();                                // Load forecast                const forecastResponse = await fetch(`${API_BASE_URL}/sensor/weather/forecast/`);                const forecastData = await forecastResponse.json();                                updateWeatherGrid(weatherData);                updateForecastChart(forecastData);                                // Load weather impact analysis                const impactResponse = await fetch(`${API_BASE_URL}/ai/predictions/analyze_weather_impact/`, {                    method: 'POST'                });                const impactData = await impactResponse.json();                updateWeatherImpact(impactData);                            } catch (error) {                console.error('Error loading weather data:', error);            }        }        // Load sensor data        async function loadSensorData() {            try {                const response = await fetch(`${API_BASE_URL}/sensor/dashboard/overview/`);                const data = await response.json();                                updateSensorGrid(data.sensor_readings);                updateSensorTable(data.sensor_readings);                            } catch (error) {                console.error('Error loading sensor data:', error);            }        }        // Load AI data        async function loadAIData() {            try {                // Get AI prediction                const predictionResponse = await fetch(`${API_BASE_URL}/ai/predictions/predict_irrigation/`, {                    method: 'POST'                });                const predictionData = await predictionResponse.json();                                updateAIDecision(predictionData);                                // Get AI analyses                const analysesResponse = await fetch(`${API_BASE_URL}/ai/analyses/recent_analyses/`);                const analysesData = await analysesResponse.json();                                updateAITimeline(analysesData);                            } catch (error) {                console.error('Error loading AI data:', error);            }        }        // Load statistics data        async function loadStatisticsData() {            try {                const response = await fetch(`${API_BASE_URL}/controller/system-status/current_status/`);                const data = await response.json();                                updateStatisticsMetrics(data);                            } catch (error) {                console.error('Error loading statistics data:', error);            }        }        // Load control data        async function loadControlData() {            try {                const response = await fetch(`${API_BASE_URL}/controller/controllers/system_overview/`);                const data = await response.json();                                updateSystemDiagnostics(data);                setupControlButtons();                            } catch (error) {                console.error('Error loading control data:', error);            }        }        // Update weather grid        function updateWeatherGrid(weatherData) {            const weatherGrid = document.getElementById('weatherGrid');                        const weatherCards = [                { icon: '🌡️', value: `${Math.round(weatherData.temperature)}°C`, label: 'Hozirgi Harorat', detail: 'Normal daraja' },                { icon: '💨', value: `${Math.round(weatherData.humidity)}%`, label: 'Havo Namligi', detail: weatherData.humidity < 50 ? 'Quruq havo' : 'Normal' },                { icon: '🌧️', value: `${weatherData.rainfall || 0}mm`, label: 'Yomg\'ir', detail: 'Oxirgi: bugun' },                { icon: '💨', value: `${Math.round(weatherData.wind_speed || 0)} km/h`, label: 'Shamol Tezligi', detail: 'Shimol-g\'arb' },                { icon: '☀️', value: `${Math.round(weatherData.solar_radiation || 0)} W/m²`, label: 'Quyosh Radiatsiyasi', detail: 'Yuqori daraja' },                { icon: '🌀', value: `${Math.round(weatherData.pressure || 1013)}`, label: 'Bosim (hPa)', detail: 'Normal' }            ];                        weatherGrid.innerHTML = weatherCards.map(card => `                <div class="weather-card">                    <div class="weather-icon">${card.icon}</div>                    <div class="weather-value">${card.value}</div>                    <div class="weather-label">${card.label}</div>                    <div style="margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">${card.detail}</div>                </div>            `).join('');        }        // Update forecast chart        function updateForecastChart(forecastData) {            const forecastChart = document.getElementById('forecastChart');                        if (forecastData && forecastData.length > 0) {                const days = ['Bugun', 'Ertaga', 'Payshanba', 'Juma', 'Shanba', 'Yakshanba', 'Dushanba'];                const icons = ['☀️', '⛅', '🌧️', '☀️', '⛅', '🌧️', '☀️'];                                forecastChart.innerHTML = `                    <div style="width: 100%;">                        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">                            ${days.slice(0, 7).map(day => `<span>${day}</span>`).join('')}                        </div>                        <div class="chart-bars">                            ${forecastData.slice(0, 7).map((forecast, index) => `                                <div class="chart-bar" style="height: ${(forecast.max_temperature / 35) * 100}%;" title="${forecast.max_temperature}°C"></div>                            `).join('')}                        </div>                        <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9rem; opacity: 0.7;">                            ${icons.slice(0, 7).map(icon => `<span>${icon}</span>`).join('')}                        </div>                    </div>                `;            }        }        // Update weather impact        function updateWeatherImpact(impactData) {            const weatherAnalysis = document.getElementById('weatherAnalysis');                        if (impactData && impactData.analysis) {                const analysis = impactData.analysis;                weatherAnalysis.innerHTML = `                    <div style="background: rgba(255, 154, 0, 0.1); border-radius: 10px; padding: 20px; margin-bottom: 15px;">                        <h3 style="color: #ff9a00; margin-bottom: 15px;">⚠️ Ogohlantirish</h3>                        ${analysis.warnings.map(warning => `<p style="margin-bottom: 10px;">• ${warning}</p>`).join('')}                    </div>                    <div style="background: rgba(0, 255, 135, 0.1); border-radius: 10px; padding: 20px; border-left: 4px solid #00ff87;">                        <h3 style="color: #00ff87; margin-bottom: 15px;">💡 AI Tavsiyasi</h3>                        ${analysis.recommendations.map(rec => `<p style="margin-bottom: 10px;">• ${rec}</p>`).join('')}                    </div>                `;            }        }        // Update sensor grid        function updateSensorGrid(sensorReadings) {            const sensorGrid = document.getElementById('sensorGrid');                        if (sensorReadings && sensorReadings.length > 0) {                sensorGrid.innerHTML = sensorReadings.map(sensor => {                    const statusClass = sensor.status === 'critical' ? 'critical' :                                        sensor.status === 'warning' ? 'warning' : '';                    const statusText = sensor.status === 'critical' ? 'Kritik - Darhol harakat kerak' :                                      sensor.status === 'warning' ? 'Ogohlantirish - Kuzatish kerak' :                                      'Normal - Optimal daraja';                                        return `                        <div class="sensor-card ${statusClass}">                            <div class="sensor-name">${getSensorIcon(sensor.sensor_type)} ${sensor.sensor_name}</div>                            <div class="sensor-value">${sensor.value}${sensor.unit}</div>                            <div class="sensor-status">${statusText}</div>                            <div style="margin-top: 10px; font-size: 0.8rem; opacity: 0.6;">                                Joylashuv: ${sensor.location}<br>                                Oxirgi yangilanish: ${getTimeAgo(sensor.timestamp)}                            </div>                        </div>                    `;                }).join('');            }        }        // Update sensor table        function updateSensorTable(sensorReadings) {            const tableBody = document.getElementById('sensorTableBody');                        if (sensorReadings && sensorReadings.length > 0) {                tableBody.innerHTML = sensorReadings.map(sensor => {                    const statusColor = sensor.status === 'critical' ? '#ff416c' :                                       sensor.status === 'warning' ? '#ff9a00' : '#00ff87';                    const statusText = sensor.status === 'critical' ? 'Kritik' :                                      sensor.status === 'warning' ? 'Ogohlantirish' : 'Normal';                                        return `                        <tr>                            <td>${getSensorIcon(sensor.sensor_type)} ${sensor.sensor_name}</td>                            <td style="color: ${statusColor}; font-weight: bold;">${sensor.value}${sensor.unit}</td>                            <td>--</td>                            <td>--</td>                            <td>--</td>                            <td style="color: ${statusColor};">${statusText}</td>                        </tr>                    `;                }).join('');            }        }        // Update AI decision        function updateAIDecision(predictionData) {            const aiDecision = document.getElementById('aiDecision');                        if (predictionData && predictionData.prediction) {                const prediction = predictionData.prediction;                const priorityClass = prediction.priority === 'critical' ? 'rgba(255, 65, 108, 0.2)' :                                     prediction.priority === 'high' ? 'rgba(255, 154, 0, 0.2)' :                                     'rgba(0, 255, 135, 0.2)';                const priorityColor = prediction.priority === 'critical' ? '#ff416c' :                                     prediction.priority === 'high' ? '#ff9a00' : '#00ff87';                                aiDecision.innerHTML = `                    <div style="background: ${priorityClass}; border-radius: 10px; padding: 20px; border-left: 4px solid ${priorityColor}; margin-bottom: 20px;">                        <h3 style="color: ${priorityColor}; margin-bottom: 10px;">                            ${prediction.irrigation_needed ? '🚨 SUG\'ORISH KERAK' : '✅ SUG\'ORISH SHART EMAS'}                        </h3>                        <p style="font-weight: bold; margin-bottom: 15px;">                            ${prediction.irrigation_needed ?                               `${prediction.water_amount_liters}L suv, ${prediction.estimated_duration_minutes} daqiqa` :                              'Hozircha sug\'orish kerak emas'}                        </p>                        <div style="background: rgba(0, 0, 0, 0.2); padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 0.9rem;">                            <div style="color: #60efff;">CONFIDENCE: ${prediction.confidence}%</div>                            <div style="color: #00ff87;">OPTIMAL_TIME: ${prediction.optimal_time}</div>                            <div style="color: #ff9a00;">PRIORITY: ${prediction.priority.toUpperCase()}</div>                        </div>                    </div>                    <div style="background: rgba(96, 239, 255, 0.1); border-radius: 10px; padding: 15px; border-left: 4px solid #60efff;">                        <h4 style="color: #60efff; margin-bottom: 10px;">🔬 AI Tahlili:</h4>                        <ul style="margin-left: 20px; line-height: 1.6;">                            ${prediction.reasoning.map(reason => `<li>${reason}</li>`).join('')}                        </ul>                    </div>                `;            }        }        // Update AI timeline        function updateAITimeline(analysesData) {            const aiTimeline = document.getElementById('aiTimeline');                        if (analysesData && analysesData.length > 0) {                aiTimeline.innerHTML = `                    <div style="position: relative; padding-left: 30px;">                        <div style="position: absolute; left: 15px; top: 0; bottom: 0; width: 2px; background: linear-gradient(to bottom, #00ff87, #60efff);"></div>                        ${analysesData.slice(0, 5).map((analysis, index) => {                            const colors = ['#ff416c', '#ff9a00', '#00ff87', '#60efff', '#667eea'];                            const color = colors[index % colors.length];                                                        return `                                <div style="position: relative; margin-bottom: 25px;">                                    <div style="position: absolute; left: -22px; width: 12px; height: 12px; background: ${color}; border-radius: 50%; border: 3px solid #1e3c72;"></div>                                    <div style="background: rgba(${color === '#ff416c' ? '255, 65, 108' : color === '#ff9a00' ? '255, 154, 0' : '0, 255, 135'}, 0.1); border-radius: 10px; padding: 15px; border-left: 4px solid ${color};">                                        <div style="font-weight: bold; color: ${color};">${getTimeAgo(analysis.created_at)} - ${analysis.title.toUpperCase()}</div>                                        <div style="margin-top: 5px;">${analysis.summary}</div>                                    </div>                                </div>                            `;                        }).join('')}                    </div>                `;            }        }        // Update statistics metrics        function updateStatisticsMetrics(statusData) {            const metricsContainer = document.getElementById('statisticsMetrics');                        const metrics = [                { icon: '💧', value: `${Math.round(statusData.total_water_usage_today || 0)}L`, label: 'Bugungi suv sarfi' },                { icon: '⚡', value: `${statusData.active_zones_count || 0}`, label: 'Faol zonalar' },                { icon: '🎯', value: '94%', label: 'AI aniqlik darajasi' },                { icon: '💰', value: '₽847', label: 'Tejamkorlik (oylik)' }            ];                        metricsContainer.innerHTML = metrics.map(metric => `                <div class="status-card">                    <span class="status-icon">${metric.icon}</span>                    <div class="status-value">${metric.value}</div>                    <div class="status-label">${metric.label}</div>                </div>            `).join('');        }        // Update system diagnostics        function updateSystemDiagnostics(systemData) {            const diagnosticsContainer = document.getElementById('systemDiagnostics');                        diagnosticsContainer.innerHTML = `                <div>                    <h3 style="color: #60efff; margin-bottom: 15px;">💾 Tizim Resurslari</h3>                    <div class="progress-container">                        <div class="progress-label">                            <span>Faol kontrollerlar</span>                            <span>${systemData.online_controllers}/${systemData.total_controllers}</span>                        </div>                        <div class="progress-bar">                            <div class="progress-fill" style="width: ${(systemData.online_controllers / systemData.total_controllers) * 100}%"></div>                        </div>                    </div>                    <div class="progress-container">                        <div class="progress-label">                            <span>Faol zonalar</span>                            <span>${systemData.active_zones}/${systemData.total_zones}</span>                        </div>                        <div class="progress-bar">                            <div class="progress-fill" style="width: ${(systemData.active_zones / systemData.total_zones) * 100}%"></div>                        </div>                    </div>                </div>                <div>                    <h3 style="color: #00ff87; margin-bottom: 15px;">📡 Tizim Holati</h3>                    <table style="width: 100%; font-size: 0.9rem;">                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">                            <td style="padding: 8px 0;">🎮 Tizim rejimi</td>                            <td style="text-align: right; color: #00ff87;">● ${systemData.system_mode || 'Avtomatik'}</td>                        </tr>                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">                            <td style="padding: 8px 0;">💧 Suv tanki</td>                            <td style="text-align: right; color: #00ff87;">● ${systemData.water_tank_level || 85}%</td>                        </tr>                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">                            <td style="padding: 8px 0;">🌐 Internet aloqa</td>                            <td style="text-align: right; color: #00ff87;">● Faol</td>                        </tr>                        <tr>                            <td style="padding: 8px 0;">⚡ Quvvat manbai</td>                            <td style="text-align: right; color: #00ff87;">● Normal</td>                        </tr>                    </table>                </div>            `;        }        // Setup control buttons        function setupControlButtons() {            // Auto/Manual mode buttons            document.getElementById('autoModeBtn').addEventListener('click', function() {                this.classList.add('active');                document.getElementById('manualModeBtn').classList.remove('active');                showSuccess('Avtomatik rejim yoqildi');            });                        document.getElementById('manualModeBtn').addEventListener('click', function() {                this.classList.add('active');                document.getElementById('autoModeBtn').classList.remove('active');                showSuccess('Qo\'lda boshqarish rejimi yoqildi');            });                        // Irrigation control buttons            document.getElementById('startIrrigationBtn').addEventListener('click', async function() {                try {                    const response = await fetch(`${API_BASE_URL}/controller/zones/1/start_irrigation/`, {                        method: 'POST',                        headers: {                            'Content-Type': 'application/json',                        },                        body: JSON.stringify({                            duration_minutes: 15,                            water_amount_liters: 30                        })                    });                                        if (response.ok) {                        showSuccess('Sug\'orish boshlandi');                    } else {                        showError('Sug\'orishni boshlashda xatolik');                    }                } catch (error) {                    console.error('Error starting irrigation:', error);                    showError('Sug\'orishni boshlashda xatolik');                }            });                        document.getElementById('stopIrrigationBtn').addEventListener('click', async function() {                try {                    const response = await fetch(`${API_BASE_URL}/controller/zones/1/stop_irrigation/`, {                        method: 'POST'                    });                                        if (response.ok) {                        showSuccess('Sug\'orish to\'xtatildi');                    } else {                        showError('Sug\'orishni to\'xtatishda xatolik');                    }                } catch (error) {                    console.error('Error stopping irrigation:', error);                    showError('Sug\'orishni to\'xtatishda xatolik');                }            });                        // Other control buttons            document.getElementById('generateReportBtn').addEventListener('click', function() {                showSuccess('Hisobot yaratilmoqda...');            });                        document.getElementById('testModeBtn').addEventListener('click', function() {                showSuccess('Test rejimi yoqildi');            });                        document.getElementById('calibrateBtn').addEventListener('click', function() {                showSuccess('Kalibrlash boshlandi');            });        }        // Utility functions        function getSensorIcon(sensorType) {            const icons = {                'soil_moisture': '🌍',                'soil_temperature': '🌡️',                'air_temperature': '🌡️',                'air_humidity': '💨',                'ph_level': '⚡',                'conductivity': '🔌',                'light_intensity': '☀️',                'rain_sensor': '🌧️'            };            return icons[sensorType] || '📡';        }        function getTimeAgo(timestamp) {            const now = new Date();            const time = new Date(timestamp);            const diffInMinutes = Math.floor((now - time) / (1000 * 60));                        if (diffInMinutes < 1) return 'Hozir';            if (diffInMinutes < 60) return `${diffInMinutes} daqiqa oldin`;            if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)} soat oldin`;            return `${Math.floor(diffInMinutes / 1440)} kun oldin`;        }        function showSuccess(message) {            // Create and show success notification            const notification = document.createElement('div');            notification.style.cssText = `                position: fixed;                top: 20px;                right: 20px;                background: linear-gradient(45deg, #00ff87, #60efff);                color: #000;                padding: 15px 20px;                border-radius: 10px;                font-weight: bold;                z-index: 10000;                animation: slideIn 0.3s ease;            `;            notification.textContent = message;            document.body.appendChild(notification);                        setTimeout(() => {                notification.remove();            }, 3000);        }        function showError(message) {            // Create and show error notification            const notification = document.createElement('div');            notification.style.cssText = `                position: fixed;                top: 20px;                right: 20px;                background: linear-gradient(45deg, #ff416c, #ff4b2b);                color: #fff;                padding: 15px 20px;                border-radius: 10px;                font-weight: bold;                z-index: 10000;                animation: slideIn 0.3s ease;            `;            notification.textContent = message;            document.body.appendChild(notification);                        setTimeout(() => {                notification.remove();            }, 5000);        }        // Add CSS animation for notifications        const style = document.createElement('style');        style.textContent = `            @keyframes slideIn {                from {                    transform: translateX(100%);                    opacity: 0;                }                to {                    transform: translateX(0);                    opacity: 1;                }            }        `;        document.head.appendChild(style);    </script></body></html>